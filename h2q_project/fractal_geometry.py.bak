import numpy as np

def mandelbrot(c, max_iter):
    """Calculates whether a complex number is in the Mandelbrot set.

    Args:
        c (complex): The complex number to test.
        max_iter (int): The maximum number of iterations.

    Returns:
        int: The number of iterations it took to escape, or max_iter if it didn't escape.
    """
    z = 0
    for n in range(max_iter):
        z = z*z + c
        if abs(z) > 2:
            return n
    return max_iter


def generate_mandelbrot_set(width, height, x_min, x_max, y_min, y_max, max_iter):
    """Generates a Mandelbrot set as a 2D numpy array.

    Args:
        width (int): The width of the image.
        height (int): The height of the image.
        x_min (float): The minimum x-value.
        x_max (float): The maximum x-value.
        y_min (float): The minimum y-value.
        y_max (float): The maximum y-value.
        max_iter (int): The maximum number of iterations.

    Returns:
        numpy.ndarray: A 2D numpy array representing the Mandelbrot set.
    """
    image = np.zeros((height, width))
    for row_index, y in enumerate(np.linspace(y_min, y_max, height)):
        for col_index, x in enumerate(np.linspace(x_min, x_max, width)):
            c = complex(x, y)
            image[row_index, col_index] = mandelbrot(c, max_iter)
    return image
