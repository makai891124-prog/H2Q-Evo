# Contributing to H2Q-Evo

é¦–å…ˆï¼Œæ„Ÿè°¢æ‚¨å¯¹ H2Q-Evo é¡¹ç›®çš„å…´è¶£ï¼æˆ‘ä»¬éå¸¸æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼Œå¸®åŠ©äººç±»æ”€ç™»æœ€ç»ˆ AGI çš„é«˜å³°ã€‚

**First, thank you for your interest in H2Q-Evo! We welcome all contributions to build AGI together.**

---

## ğŸ“‹ ç›®å½• (Table of Contents)

- [è¡Œä¸ºå‡†åˆ™](#è¡Œä¸ºå‡†åˆ™-code-of-conduct)
- [å¦‚ä½•è´¡çŒ®](#å¦‚ä½•è´¡çŒ®-how-to-contribute)
- [å¼€å‘è®¾ç½®](#å¼€å‘è®¾ç½®-development-setup)
- [ç¼–ç è§„èŒƒ](#ç¼–ç è§„èŒƒ-coding-standards)
- [æäº¤æŒ‡å—](#æäº¤æŒ‡å—-submission-guidelines)
- [æŠ¥å‘Š bug](#æŠ¥å‘Š-bug-bug-reports)
- [å»ºè®®åŠŸèƒ½](#å»ºè®®åŠŸèƒ½-feature-requests)

---

## è¡Œä¸ºå‡†åˆ™ (Code of Conduct)

### æˆ‘ä»¬çš„æ‰¿è¯º (Our Commitment)

ä¸ºäº†è¥é€ ä¸€ä¸ªå¼€æ”¾å’Œæ¬¢è¿çš„ç¯å¢ƒï¼Œæˆ‘ä»¬ï¼ˆä½œä¸ºè´¡çŒ®è€…å’Œç»´æŠ¤è€…ï¼‰æ‰¿è¯ºï¼š

åœ¨æˆ‘ä»¬çš„é¡¹ç›®å’Œç¤¾åŒºä¸­å‚ä¸æ‰€æœ‰äººå‘˜ï¼Œæ— è®ºå…¶å¹´é¾„ã€ä½“å‹ã€æ®‹ç–¾ã€ç§æ—ã€æ€§åˆ«è®¤åŒä¸è¡¨è¾¾ã€ç»éªŒæ°´å¹³ã€å›½ç±ã€ä¸ªäººå¤–è¡¨ã€å®—æ•™æˆ–æ€§è®¤åŒä¸æ€§å–å‘ï¼Œéƒ½äº«å—ä¸€ä¸ªæ— éªšæ‰°çš„ä½“éªŒã€‚

### æˆ‘ä»¬çš„æ ‡å‡† (Our Standards)

å»ºç«‹ç§¯æç¯å¢ƒçš„è¡Œä¸ºç¤ºä¾‹åŒ…æ‹¬ï¼š

- ä½¿ç”¨æ¬¢è¿å’ŒåŒ…å®¹çš„è¯­è¨€
- å°Šé‡æŒä¸åŒè§‚ç‚¹å’Œç»å†
- æ¥å—å»ºè®¾æ€§æ‰¹è¯„
- å…³æ³¨å¯¹ç¤¾åŒºæœ€æœ‰åˆ©çš„äº‹æƒ…
- è¡¨ç°å¯¹å…¶ä»–ç¤¾åŒºæˆå‘˜çš„åŒæƒ…

ä¸å¯æ¥å—çš„è¡Œä¸ºç¤ºä¾‹åŒ…æ‹¬ï¼š

- ä½¿ç”¨å¸¦æœ‰æ€§å†…æ¶µçš„è¯­è¨€æˆ–æ„è±¡
- äººèº«æ”»å‡»ã€ä¾®è¾±æ€§è¯„è®º
- éªšæ‰°æˆ–éªšæ‰°æ€§è¯„è®º
- æœªç»åŒæ„å‘å¸ƒä»–äººéšç§ä¿¡æ¯
- å…¶ä»–å¯èƒ½åˆç†åœ°è¢«è§†ä¸ºä¸ä¸“ä¸šæˆ–ä¸å—æ¬¢è¿çš„è¡Œä¸º

---

## å¦‚ä½•è´¡çŒ® (How to Contribute)

### è´¡çŒ®ç±»å‹ (Types of Contributions)

æˆ‘ä»¬æ¬¢è¿ä»¥ä¸‹å½¢å¼çš„è´¡çŒ®ï¼š

#### ğŸ¯ æ ¸å¿ƒç®—æ³• (Core Algorithm)

- **å››å…ƒæ•°ä¼˜åŒ–**ï¼šæ”¹è¿› Fueter å¾®ç§¯åˆ†ã€æµå½¢å­¦ä¹ ç®—æ³•
- **åˆ†å½¢å±‚çº§**ï¼šé€’å½’ç»“æ„ã€å†…å­˜ç®¡ç†ä¼˜åŒ–
- **å…¨çº±æµ**ï¼šçº¦æŸä¼ æ’­ã€å¹»è§‰æ£€æµ‹æ”¹è¿›

**æŠ€èƒ½è¦æ±‚**: æ•°å­¦ã€PyTorchã€æ·±åº¦å­¦ä¹ 

**é¢„è®¡æ—¶é—´**: 2-4 å‘¨

**ç¤ºä¾‹ PR**: 
```python
# æ”¹è¿›å››å…ƒæ•°ä¹˜æ³•çš„æ•°å€¼ç¨³å®šæ€§
# Improve numerical stability of quaternion multiplication
```

#### ğŸ› Bug ä¿®å¤ (Bug Fixes)

- å‘ç°å¹¶ä¿®å¤ bug
- æ”¹è¿›é”™è¯¯æ¶ˆæ¯
- ä¿®å¤æ–‡æ¡£é”™è¯¯

**æŠ€èƒ½è¦æ±‚**: Python, debugging

**é¢„è®¡æ—¶é—´**: 1-3 å¤©

**ç¤ºä¾‹ PR**:
```
Fix: Incorrect dimension handling in quaternion projection layer
```

#### ğŸ“– æ–‡æ¡£ (Documentation)

- æ‰©å±•ç°æœ‰æ–‡æ¡£
- ç¼–å†™æ•™ç¨‹å’Œç¤ºä¾‹
- æä¾›ä¸­æ–‡/è‹±æ–‡ç¿»è¯‘
- æ”¹è¿› API æ–‡æ¡£

**æŠ€èƒ½è¦æ±‚**: æŠ€æœ¯å†™ä½œã€ç†è§£é¡¹ç›®æ¶æ„

**é¢„è®¡æ—¶é—´**: 1-2 å‘¨

**ç¤ºä¾‹ä»»åŠ¡**:
- ç¼–å†™"ä»é›¶å¼€å§‹è®­ç»ƒè‡ªå®šä¹‰æ¨¡å‹"æ•™ç¨‹
- æ·»åŠ æ›´å¤š Jupyter ç¬”è®°æœ¬ç¤ºä¾‹
- æ”¹è¿› API å‚è€ƒæ–‡æ¡£

#### ğŸ§ª æµ‹è¯• (Testing)

- ç¼–å†™å•å…ƒæµ‹è¯•
- ç¼–å†™é›†æˆæµ‹è¯•
- æ€§èƒ½åŸºå‡†æµ‹è¯•
- è¦†ç›–ç‡æ”¹è¿›

**æŠ€èƒ½è¦æ±‚**: Python, pytest, testing

**é¢„è®¡æ—¶é—´**: 1-2 å‘¨

**ç¤ºä¾‹**:
```python
def test_quaternion_multiplication_commutativity():
    """Test that quaternion multiplication is not commutative"""
    q1 = Quaternion(1, 2, 3, 4)
    q2 = Quaternion(5, 6, 7, 8)
    assert (q1 * q2) != (q2 * q1)
```

#### ğŸš€ æ€§èƒ½ä¼˜åŒ– (Performance)

- GPU/TPU CUDA æ ¸å¿ƒå®ç°
- åˆ†å¸ƒå¼è®­ç»ƒæ”¯æŒ
- å†…å­˜ä½¿ç”¨ä¼˜åŒ–
- æ¨ç†é€Ÿåº¦æ”¹è¿›

**æŠ€èƒ½è¦æ±‚**: CUDA, PyTorch, æ€§èƒ½åˆ†æ

**é¢„è®¡æ—¶é—´**: 2-4 å‘¨

**ç›®æ ‡**: 
- æ¨ç†å»¶è¿Ÿ < 10 Î¼sï¼ˆvs å½“å‰ 23.68 Î¼sï¼‰
- GPU åŠ é€Ÿ > 50x

#### ğŸŒ åº”ç”¨ (Applications)

- çœŸå®ä¸–ç•Œç”¨ä¾‹å®ç°
- ä¸å…¶ä»–æ¡†æ¶é›†æˆ
- æ¼”ç¤ºé¡¹ç›®
- è¡Œä¸šåº”ç”¨

**æŠ€èƒ½è¦æ±‚**: ç‰¹å®šé¢†åŸŸçŸ¥è¯†

**é¢„è®¡æ—¶é—´**: 2-6 å‘¨

**ç¤ºä¾‹**:
- å¤šæ¨¡æ€å­¦ä¹ é›†æˆï¼ˆVision + Languageï¼‰
- åœ¨çº¿å­¦ä¹ æ¼”ç¤ºï¼ˆæŒç»­é€‚åº”ï¼‰
- è¾¹ç¼˜è®¾å¤‡éƒ¨ç½²ç¤ºä¾‹

---

## å¼€å‘è®¾ç½® (Development Setup)

### 1. Fork å’Œ Clone

```bash
# Fork on GitHub, then:
git clone https://github.com/YOUR_USERNAME/H2Q-Evo.git
cd H2Q-Evo
git remote add upstream https://github.com/ORIGINAL_OWNER/H2Q-Evo.git
```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ (Virtual Environment)

```bash
# Python 3.8+
python3 -m venv venv
source venv/bin/activate  # macOS/Linux
# or
venv\Scripts\activate  # Windows
```

### 3. å®‰è£…ä¾èµ– (Dependencies)

```bash
pip install -r requirements.txt
pip install -r requirements-dev.txt  # å¼€å‘ä¾èµ–

# å¼€å‘ä¾èµ–åŒ…æ‹¬:
# - pytest (å•å…ƒæµ‹è¯•)
# - black (ä»£ç æ ¼å¼åŒ–)
# - flake8 (ä»£ç æ£€æŸ¥)
# - mypy (ç±»å‹æ£€æŸ¥)
# - sphinx (æ–‡æ¡£)
```

### 4. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (Feature Branch)

```bash
git checkout -b feature/your-feature-name
# æˆ–
git checkout -b fix/bug-description
# æˆ–
git checkout -b docs/documentation-update
```

### 5. è®¾ç½® Git é’©å­ (Git Hooks) [å¯é€‰]

```bash
# è‡ªåŠ¨è¿è¡Œæµ‹è¯•å’Œæ ¼å¼åŒ–
pip install pre-commit
pre-commit install
```

---

## ç¼–ç è§„èŒƒ (Coding Standards)

### Python é£æ ¼

éµå¾ª **PEP 8** æ ‡å‡†ï¼Œä½¿ç”¨ `black` å’Œ `flake8`:

```bash
# è‡ªåŠ¨æ ¼å¼åŒ–
black h2q_project/

# æ£€æŸ¥ä»£ç é£æ ¼
flake8 h2q_project/

# ç±»å‹æ£€æŸ¥
mypy h2q_project/
```

### å‘½åçº¦å®š (Naming)

```python
# âœ… Good
def compute_quaternion_magnitude(q: Quaternion) -> float:
    """Calculate magnitude of a quaternion."""
    pass

class FractalHierarchyNode:
    """Node in a fractal hierarchy tree."""
    pass

# âŒ Avoid
def compute_quat_mag(q):
    pass

class FNode:
    pass
```

### æ–‡æ¡£å­—ç¬¦ä¸² (Docstrings)

ä½¿ç”¨ Google é£æ ¼çš„ docstrings:

```python
def train_with_online_learning(
    model: HoloModel,
    data_stream: Iterator[Tensor],
    learning_rate: float = 1e-4,
) -> Dict[str, float]:
    """Train model with online learning using spectral shift tracking.

    Online learning allows the model to adapt continuously without
    catastrophic forgetting through incremental manifold updates.

    Args:
        model: The holomorphic model to train.
        data_stream: Iterator of input tensors from data stream.
        learning_rate: Learning rate for manifold adaptation.

    Returns:
        Dictionary with keys:
            - 'loss': Final training loss
            - 'eta': Spectral shift metric
            - 'iterations': Number of updates

    Raises:
        ValueError: If learning_rate is negative
        TypeError: If model is not HoloModel instance

    Example:
        >>> model = HoloModel(dim=32)
        >>> stream = iter(data_loader)
        >>> results = train_with_online_learning(model, stream)
        >>> print(results['eta'])
    """
    pass
```

### ç±»å‹æç¤º (Type Hints)

ä½¿ç”¨ç±»å‹æç¤ºå¢åŠ ä»£ç å¯è¯»æ€§ï¼š

```python
from typing import Dict, List, Optional, Tuple
import torch
from h2q.core.quaternion import Quaternion

def process_quaternion_batch(
    batch: torch.Tensor,
    apply_normalization: bool = True,
) -> Tuple[torch.Tensor, Dict[str, float]]:
    """Process a batch of quaternions."""
    pass
```

### æµ‹è¯• (Tests)

ç¼–å†™å®Œæ•´çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼š

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_quaternion.py::test_multiplication

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=h2q_project
```

### æµ‹è¯•ç»“æ„

```
tests/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ test_quaternion.py
â”‚   â”œâ”€â”€ test_fractal.py
â”‚   â””â”€â”€ test_memory.py
â”œâ”€â”€ integration/
â”‚   â”œâ”€â”€ test_training_pipeline.py
â”‚   â””â”€â”€ test_online_learning.py
â””â”€â”€ fixtures/
    â”œâ”€â”€ sample_data.py
    â””â”€â”€ mock_models.py
```

---

## æäº¤æŒ‡å— (Submission Guidelines)

### Commit æ¶ˆæ¯ (Commit Messages)

éµå¾ª **Conventional Commits** æ ¼å¼:

```
<type>(<scope>): <subject>

<body>

<footer>
```

**Type**:
- `feat`: æ–°åŠŸèƒ½
- `fix`: Bug ä¿®å¤
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- `refactor`: ä»£ç é‡æ„
- `perf`: æ€§èƒ½æ”¹è¿›
- `test`: æµ‹è¯•æ›´æ–°
- `chore`: æ„å»ºè¿‡ç¨‹ã€ä¾èµ–æ›´æ–°

**ç¤ºä¾‹**:

```
feat(quaternion): add SLERP interpolation for smooth rotation paths

Implement spherical linear interpolation for quaternions to enable
smooth animation and trajectory planning. This improves compatibility
with graphics pipelines and enables new use cases.

Closes #123
```

```
fix(memory): correct spectral swap buffer overflow

Fixed off-by-one error in spectral swap memory management that caused
buffer overflow when exceeding 2GB virtual memory. Added comprehensive
tests for edge cases.

Fixes #456
```

### Pull Request æ¨¡æ¿

åˆ›å»º PR æ—¶ï¼Œè¯·ä½¿ç”¨æ­¤æ¨¡æ¿:

```markdown
## Description
ç®€æ´æè¿°ä½ çš„æ”¹åŠ¨

## Type of Change
- [ ] Bug fix
- [ ] New feature
- [ ] Documentation update
- [ ] Performance improvement

## Related Issues
Closes #123

## Changes Made
- æ”¹åŠ¨ 1
- æ”¹åŠ¨ 2
- æ”¹åŠ¨ 3

## Testing
æè¿°ä½ çš„æµ‹è¯•æ–¹æ³•

## Checklist
- [ ] Tests pass locally
- [ ] No new warnings
- [ ] Documentation updated
- [ ] Commit messages follow convention
```

---

## æŠ¥å‘Š Bug (Bug Reports)

### åˆ›å»º Bug Report

ç‚¹å‡» [GitHub Issues](https://github.com/yourusername/H2Q-Evo/issues/new) å¹¶é€‰æ‹© "Bug Report" æ¨¡æ¿

**å¿…é¡»åŒ…å«**:
1. **æ ‡é¢˜**: æ¸…æ™°ç®€æ´çš„é—®é¢˜æè¿°
2. **ç¯å¢ƒ**: Python ç‰ˆæœ¬ã€OSã€PyTorch ç‰ˆæœ¬ç­‰
3. **æ­¥éª¤**: é‡ç°é—®é¢˜çš„å…·ä½“æ­¥éª¤
4. **é¢„æœŸ**: é¢„æœŸçš„è¡Œä¸º
5. **å®é™…**: å®é™…çš„è¡Œä¸º/é”™è¯¯æ¶ˆæ¯
6. **æ—¥å¿—**: å®Œæ•´çš„é”™è¯¯è·Ÿè¸ª

**ç¤ºä¾‹**:

```markdown
## Bug: Quaternion normalization produces NaN values

### Environment
- Python: 3.10
- PyTorch: 2.0
- OS: macOS 13
- H2Q-Evo: v0.1

### Steps to Reproduce
1. Create quaternion with all zero components
2. Call normalize()
3. Observe NaN values

### Expected
Should return unit quaternion or raise ValueError

### Actual
```python
q = Quaternion(0, 0, 0, 0)
q_norm = q.normalize()  # Returns all NaN
```

### Error Log
```
RuntimeError: Cannot normalize zero quaternion
```
```

---

## å»ºè®®åŠŸèƒ½ (Feature Requests)

### åˆ›å»ºåŠŸèƒ½è¯·æ±‚

ç‚¹å‡» [GitHub Issues](https://github.com/yourusername/H2Q-Evo/issues/new) å¹¶é€‰æ‹© "Feature Request" æ¨¡æ¿

**åº”åŒ…å«**:
1. **é—®é¢˜**: è¦è§£å†³çš„é—®é¢˜
2. **è§£å†³æ–¹æ¡ˆ**: ä½ çš„å»ºè®®è§£å†³æ–¹æ¡ˆ
3. **æ›¿ä»£æ–¹æ¡ˆ**: è€ƒè™‘è¿‡çš„å…¶ä»–æ–¹æ¡ˆ
4. **å½±å“**: å¯¹é¡¹ç›®çš„æ½œåœ¨å½±å“

**ç¤ºä¾‹**:

```markdown
## Feature: GPU-accelerated quaternion operations

### Problem
ç›®å‰å››å…ƒæ•°æ“ä½œåœ¨ CPU ä¸Šè¿è¡Œï¼Œé™åˆ¶äº†å¤„ç†é€Ÿåº¦

### Proposed Solution
å®ç° CUDA æ ¸å¿ƒè¿›è¡Œå››å…ƒæ•°ä¹˜æ³•ã€å½’ä¸€åŒ–ç­‰åŸºæœ¬æ“ä½œ

### Alternative Solutions
- ä½¿ç”¨ CuPyï¼ˆæ€§èƒ½å¯èƒ½è¾ƒä½ï¼‰
- ç­‰å¾… PyTorch åŸç”Ÿæ”¯æŒ

### Potential Impact
- æ¨ç†é€Ÿåº¦å¯èƒ½æå‡ 50-100x
- è®­ç»ƒé€Ÿåº¦æå‡ 20-30x
- å¼€å¯ GPU ä¸Šçš„è¾¹ç¼˜éƒ¨ç½²
```

---

## ä»£ç å®¡æŸ¥ (Code Review)

### å®¡æŸ¥æ¸…å• (Review Checklist)

å½“å®¡æŸ¥ PR æ—¶ï¼Œè¯·æ£€æŸ¥:

- âœ… ä»£ç éµå¾ªé£æ ¼æŒ‡å—
- âœ… åŒ…å«é€‚å½“çš„å•å…ƒæµ‹è¯•
- âœ… æ–‡æ¡£å­—ç¬¦ä¸²å·²æ›´æ–°
- âœ… æ²¡æœ‰æ€§èƒ½é€€åŒ–
- âœ… å‘åå…¼å®¹ï¼ˆæˆ–æ˜ç¡®è¯´æ˜ç ´åæ€§æ›´æ”¹ï¼‰
- âœ… Commit æ¶ˆæ¯æ¸…æ™°æ˜ç¡®

### å»ºè®¾æ€§åé¦ˆ

æä¾›æœ‰å¸®åŠ©çš„å®¡æŸ¥æ„è§:

```markdown
# å¥½çš„åé¦ˆç¤ºä¾‹ âœ…
è€ƒè™‘ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼æ¥æé«˜æ€§èƒ½ã€‚
æ ¹æ® PEP 8ï¼Œå‡½æ•°é•¿åº¦åº”ä¿æŒåœ¨ 50 è¡Œä»¥å†…ã€‚

# ä¸å¥½çš„åé¦ˆç¤ºä¾‹ âŒ
è¿™å¤ªç³Ÿç³•äº†
ä»£ç å¾ˆçƒ‚
```

---

## CI/CD æµç¨‹

### è‡ªåŠ¨æ£€æŸ¥

æ¯ä¸ª PR å°†è‡ªåŠ¨è¿è¡Œ:

```bash
# ä»£ç æ ¼å¼æ£€æŸ¥
black --check h2q_project/

# ä»£ç è´¨é‡æ£€æŸ¥
flake8 h2q_project/
mypy h2q_project/

# æµ‹è¯•å¥—ä»¶
pytest --cov=h2q_project
pytest tests/unit
pytest tests/integration

# æ–‡æ¡£æ„å»º
sphinx-build docs/ docs/_build/
```

æ‰€æœ‰æ£€æŸ¥å¿…é¡»é€šè¿‡æ‰èƒ½åˆå¹¶ã€‚

---

## è·å¾—å¸®åŠ© (Getting Help)

### èµ„æº

- **æ–‡æ¡£**: [README.md](./README.md)
- **è®¨è®º**: [GitHub Discussions](https://github.com/yourusername/H2Q-Evo/discussions)
- **é—®é¢˜**: [GitHub Issues](https://github.com/yourusername/H2Q-Evo/issues)

### è”ç³»ç»´æŠ¤è€…

- ğŸ“§ Email: [your-email@example.com]
- ğŸ’¬ GitHub: [@yourusername](https://github.com/yourusername)

---

## è®¸å¯è¯ (License)

é€šè¿‡è´¡çŒ®åˆ°æ­¤é¡¹ç›®ï¼Œæ‚¨åŒæ„æ‚¨çš„è´¡çŒ®å°†åœ¨ MIT è®¸å¯è¯ä¸‹å‘å¸ƒã€‚

**By contributing to H2Q-Evo, you agree that your contributions will be licensed under its MIT License.**

---

## è‡´è°¢ (Acknowledgments)

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å¸®åŠ©æˆ‘ä»¬æ„å»ºæ›´å¥½çš„ AGI æ¡†æ¶ï¼

*Thank you for helping us build the future of AGI!* ğŸš€

---

**æœ€åæ›´æ–°** (Last Updated): 2026-01-19
