{
  "timestamp": 1769069239.983566,
  "response": "[\n  {\n    \"file_path\": \"h2q_project/utils/profiler.py\",\n    \"content\": \"import time\\nimport psutil\\nimport os\\nimport json\\n\\nclass Profiler:\\n    def __init__(self, name):\\n        self.name = name\\n        self.start_time = None\\n        self.end_time = None\\n\\n    def start(self):\\n        self.start_time = time.time()\\n\\n    def stop(self):\\n        self.end_time = time.time()\\n\\n    def duration(self):\\n        if self.start_time is None or self.end_time is None:\\n            return None\\n        return self.end_time - self.start_time\\n\\n    def __enter__(self):\\n        self.start()\\n        return self\\n\\n    def __exit__(self, exc_type, exc_val, exc_tb):\\n        self.stop()\\n\\n    def get_cpu_usage(self):\\n        return psutil.cpu_percent()\\n\\n    def get_memory_usage(self):\\n        process = psutil.Process(os.getpid())\\n        return process.memory_info().rss / (1024 * 1024)  # in MB\\n\\n    def get_gpu_usage(self):\\n        try:\\n            import pynvml\\n            pynvml.nvmlInit()\\n            handle = pynvml.nvmlDeviceGetHandleByIndex(0)\\n            gpu_util = pynvml.nvmlDeviceGetUtilizationRates(handle).gpu\\n            pynvml.nvmlShutdown()\\n            return gpu_util\\n        except Exception as e:\\n            print(f\\\"GPU usage monitoring not available: {e}\\\")\\n            return None\\n\\n    def get_profile_data(self):\\n      profile_data = {\\n          \\\"name\\\": self.name,\\n          \\\"duration\\\": self.duration(),\\n          \\\"cpu_usage\\\": self.get_cpu_usage(),\\n          \\\"memory_usage\\\": self.get_memory_usage()\\n      }\\n      gpu_usage = self.get_gpu_usage()\\n      if gpu_usage is not None:\\n        profile_data[\\\"gpu_usage\\\"] = gpu_usage\\n\\n      return profile_data\\n\\n    def print_profile_data(self):\\n        profile_data = self.get_profile_data()\\n        print(json.dumps(profile_data, indent=4))\\n\\n\\nif __name__ == '__main__':\\n    # Example usage:\\n    with Profiler(\\\"Test\\\") as profiler:\\n        time.sleep(1)\\n\\n    profiler.print_profile_data()\\n\"\n  },\n  {\n    \"file_path\": \"h2q_project/train.py\",\n    \"content\": \"import time\\nfrom h2q_project.model import H2QModel\\nfrom h2q_project.utils.data_loader import load_data\\nfrom h2q_project.utils.profiler import Profiler\\n\\ndef train_model(model, data, epochs=10):\\n    print(\\\"Starting training...\\\")\\n    for epoch in range(epochs):\\n        with Profiler(f\\\"Epoch {epoch+1}\\\") as epoch_profiler:\\n            print(f\\\"Epoch {epoch+1}/{epochs}\\\")\\n            # Simulate training steps\\n            time.sleep(0.5) # Simulate some work\\n            #model.train_on_batch(data)\\n        epoch_profiler.print_profile_data()\\n    print(\\\"Training complete.\\\")\\n\\nif __name__ == '__main__':\\n    # Example usage:\\n    model = H2QModel(input_dim=10, output_dim=5)\\n    data = load_data()\\n    train_model(model, data, epochs=3)\\n\"\n  }\n]",
  "model": "gemini-2.0-flash"
}