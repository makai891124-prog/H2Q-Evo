{
  "timestamp": 1769071282.8208,
  "response": "[\n  {\n    \"file_path\": \"h2q_project/performance_monitor.py\",\n    \"content\": \"import docker\\nimport time\\nimport json\\nimport logging\\nimport os\\n\\n# Configure logging\\nlogging.basicConfig(filename='container_performance.log', level=logging.INFO, \\n                    format='%(asctime)s - %(levelname)s - %(message)s')\\n\\n\\ndef monitor_container(container_name):\\n    try:\\n        client = docker.from_env()\\n        container = client.containers.get(container_name)\\n    except docker.errors.NotFound:\\n        logging.error(f\\\"Container '{container_name}' not found.\\\")\\n        return\\n    except docker.errors.APIError as e:\\n        logging.error(f\\\"Error connecting to Docker API: {e}\\\")\\n        return\\n\\n    while True:\\n        try:\\n            stats = container.stats(stream=False)\\n\\n            cpu_usage = stats['cpu_stats']['cpu_usage']['total_usage']\\n            system_usage = stats['cpu_stats']['system_cpu_usage']\\n            cpu_count = len(stats['cpu_stats']['cpu_usage']['percpu_usage'])\\n\\n            cpu_percent = 0.0\\n            if system_usage > 0:\\n                cpu_percent = round(\\n                    (cpu_usage / system_usage) * cpu_count * 100.0, 2\\n                )\\n\\n            memory_usage = stats['memory_stats']['usage']\\n            memory_limit = stats['memory_stats']['limit']\\n            memory_percent = round((memory_usage / memory_limit) * 100.0, 2)\\n\\n            log_data = {\\n                'container_name': container_name,\\n                'cpu_percent': cpu_percent,\\n                'memory_usage': memory_usage,\\n                'memory_limit': memory_limit,\\n                'memory_percent': memory_percent\\n            }\\n\\n            logging.info(json.dumps(log_data))\\n\\n            time.sleep(5)\\n\\n        except docker.errors.APIError as e:\\n            logging.error(f\\\"Error getting container stats: {e}\\\")\\n            break\\n        except Exception as e:\\n            logging.error(f\\\"An unexpected error occurred: {e}\\\")\\n            break\\n\\nif __name__ == \\\"__main__\\\":\\n    container_name = os.environ.get('CONTAINER_NAME', 'my_container') # Default container name\\n    monitor_container(container_name)\"\n  }\n]",
  "model": "gemini-2.0-flash"
}