{
  "timestamp": 1769073610.772209,
  "response": "[\n  {\n    \"file_path\": \"h2q_project/benchmark/benchmark_quaternion.py\",\n    \"content\": \"import timeit\\nimport numpy as np\\nimport cupy as cp\\nimport pyquaternion\\n\\n# Configuration\\nNUM_RUNS = 1000\\nARRAY_SIZE = 1000\\n\\n# CPU Implementations\\ndef quaternion_multiply_numpy(q1, q2):\\n    return np.array([\\n        q1[0]*q2[0] - q1[1]*q2[1] - q1[2]*q2[2] - q1[3]*q2[3],\\n        q1[0]*q2[1] + q1[1]*q2[0] + q1[2]*q2[3] - q1[3]*q2[2],\\n        q1[0]*q2[2] - q1[1]*q2[3] + q1[2]*q2[0] + q1[3]*q2[1],\\n        q1[0]*q2[3] + q1[1]*q2[2] - q1[2]*q2[1] + q1[3]*q2[0]\\n    ])\\n\\ndef benchmark_numpy():\\n    q1_array = np.random.rand(ARRAY_SIZE, 4)\\n    q2_array = np.random.rand(ARRAY_SIZE, 4)\\n\\n    def numpy_multiply():\\n        for i in range(ARRAY_SIZE):\\n            quaternion_multiply_numpy(q1_array[i], q2_array[i])\\n\\n    time = timeit.timeit(numpy_multiply, number=NUM_RUNS)\\n    print(f\\\"Numpy Multiplication: {time/NUM_RUNS:.6f} seconds per run\\\")\\n\\n# CuPy Implementations\\nquaternion_multiply_gpu_kernel = cp.ElementwiseKernel(\\n    'float32 w1, float32 x1, float32 y1, float32 z1, float32 w2, float32 x2, float32 y2, float32 z2',\\n    'float32 w3, float32 x3, float32 y3, float32 z3',\\n    '''\\n    w3 = w1*w2 - x1*x2 - y1*y2 - z1*z2;\\n    x3 = w1*x2 + x1*w2 + y1*z2 - z1*y2;\\n    y3 = w1*y2 - x1*z2 + y1*w2 + z1*x2;\\n    z3 = w1*z2 + x1*y2 - y1*x2 + z1*w2;\\n    ''',\\n    'quaternion_multiply'\\n)\\n\\ndef benchmark_cupy():\\n    q1_array = cp.random.rand(ARRAY_SIZE, 4, dtype=cp.float32)\\n    q2_array = cp.random.rand(ARRAY_SIZE, 4, dtype=cp.float32)\\n\\n    def cupy_multiply():\\n        quaternion_multiply_gpu_kernel(q1_array[:,0], q1_array[:,1], q1_array[:,2], q1_array[:,3],\\n                                        q2_array[:,0], q2_array[:,1], q2_array[:,2], q2_array[:,3],\\n                                        None, None, None, None)\\n\\n    time = timeit.timeit(cupy_multiply, number=NUM_RUNS)\\n    print(f\\\"CuPy Multiplication: {time/NUM_RUNS:.6f} seconds per run\\\")\\n\\n# pyquaternion Implementation\\ndef benchmark_pyquaternion():\\n    q1_array = [pyquaternion.Quaternion(np.random.rand(4)) for _ in range(ARRAY_SIZE)]\\n    q2_array = [pyquaternion.Quaternion(np.random.rand(4)) for _ in range(ARRAY_SIZE)]\\n\\n    def pyquaternion_multiply():\\n        for i in range(ARRAY_SIZE):\\n            q1_array[i] * q2_array[i]\\n\\n    time = timeit.timeit(pyquaternion_multiply, number=NUM_RUNS)\\n    print(f\\\"pyquaternion Multiplication: {time/NUM_RUNS:.6f} seconds per run\\\")\\n\\n\\nif __name__ == \\\"__main__\\\":\\n    print(\\\"Benchmarking Quaternion Multiplication\\\")\\n    benchmark_numpy()\\n    benchmark_cupy()\\n    benchmark_pyquaternion()\\n\"\n  }\n]",
  "model": "gemini-2.0-flash"
}