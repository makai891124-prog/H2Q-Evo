{
  "timestamp": 1769071231.6306062,
  "response": "[\n  {\n    \"file_path\": \"h2q_project/logger.py\",\n    \"content\": \"import logging\\nimport json\\nimport os\\n\\nclass H2QLogger:\\n    _instance = None\\n\\n    def __new__(cls, log_file='h2q.log', max_size_mb=10):\\n        if cls._instance is None:\\n            cls._instance = super(H2QLogger, cls).__new__(cls)\\n            cls._instance.log_file = log_file\\n            cls._instance.max_size_mb = max_size_mb\\n            cls._instance.logger = logging.getLogger('H2Q')\\n            cls._instance.logger.setLevel(logging.INFO)\\n            cls._instance.formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s')\\n            cls._instance._setup_file_handler()\\n        return cls._instance\\n\\n    def _setup_file_handler(self):\\n        # Check if the log file exceeds the maximum size\\n        if os.path.exists(self.log_file) and os.path.getsize(self.log_file) > self.max_size_mb * 1024 * 1024:\\n            # Rename the existing log file\\n            os.rename(self.log_file, self.log_file + '.old')\\n\\n        # Create a file handler that appends to the log file\\n        fh = logging.FileHandler(self.log_file)\\n        fh.setFormatter(self.formatter)\\n        self.logger.addHandler(fh)\\n\\n    def log(self, level, message, data=None):\\n        log_entry = {\\n            'message': message\\n        }\\n        if data:\\n            log_entry['data'] = data\\n\\n        log_message = json.dumps(log_entry)\\n\\n        if level == 'info':\\n            self.logger.info(log_message)\\n        elif level == 'warning':\\n            self.logger.warning(log_message)\\n        elif level == 'error':\\n            self.logger.error(log_message)\\n        elif level == 'debug':\\n            self.logger.debug(log_message)\\n        else:\\n            self.logger.info(log_message) # Default to info\\n\\n    def info(self, message, data=None):\\n        self.log('info', message, data)\\n\\n    def warning(self, message, data=None):\\n        self.log('warning', message, data)\\n\\n    def error(self, message, data=None):\\n        self.log('error', message, data)\\n\\n    def debug(self, message, data=None):\\n        self.log('debug', message, data)\\n\\n# Example usage (not for inclusion in the logger class itself)\\nif __name__ == '__main__':\\n    logger = H2QLogger()\\n    logger.info('System started', {'version': '1.0.0'})\\n    logger.warning('Low memory', {'available_mb': 500})\\n    logger.error('Failed to connect to database', {'retries': 3})\\n    logger.debug('Detailed debug information', {'step': 1, 'value': 42})\\n\\n    # Simulate exceeding the log file size\\n    with open('h2q.log', 'w') as f:\\n        f.write('This is a long log message to exceed the maximum size.\\\\n' * 200000)\\n\\n    logger2 = H2QLogger() # Get the singleton instance again\\n    logger2.info('Continuing after simulated log rotation')\\n\"\n  }\n]",
  "model": "gemini-2.0-flash"
}