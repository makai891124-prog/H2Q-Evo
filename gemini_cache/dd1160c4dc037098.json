{
  "timestamp": 1769068572.461493,
  "response": "[\n  {\n    \"file_path\": \"h2q_project/h2q/core/evolution_system.py\",\n    \"content\": \"import os\\nimport ast\\nfrom typing import List, Dict\\n\\nfrom h2q.core.loader import LocalFileLoader\\n\\nclass EvolutionSystem:\\n    def __init__(self, project_path: str, llm):\\n        self.project_path = project_path\\n        self.llm = llm\\n        self.file_loader = LocalFileLoader(project_path)\\n\\n    def get_relevant_files(self, query: str) -> List[str]:\\n        # Placeholder implementation.  Ideally, this would use a more sophisticated\\n        # method like semantic search to identify relevant files.\\n        all_files = self.file_loader.load_all_files()\\n        return list(all_files.keys())\\n\\n    def _extract_definitions(self, file_path: str, max_lines: int = 500) -> str:\\n        \\\"\\\"\\\"Extract class and function definitions from a file, limiting line count.\\n        \\\"\\\"\\\"\\n        try:\\n            with open(file_path, 'r') as f:\\n                content = f.read()\\n        except FileNotFoundError:\\n            return \\\"\\\" # or raise the exception if you prefer\\n\\n        tree = ast.parse(content)\\n        definitions = []\\n        line_count = 0\\n\\n        for node in tree.body:\\n            if line_count >= max_lines:\\n                break\\n\\n            if isinstance(node, (ast.FunctionDef, ast.AsyncFunctionDef, ast.ClassDef)):\\n                # Extract the source code of the definition\\n                definition_str = ast.get_source_segment(content, node)\\n                if definition_str:\\n                    definitions.append(definition_str)\\n                    line_count += definition_str.count(\\\"\\\\n\\\") + 1 # Accurate line count\\n\\n        return \\\"\\\\n\\\".join(definitions)\\n\\n\\n    def get_project_context(self, query: str) -> str:\\n        relevant_files = self.get_relevant_files(query)\\n        context = \\\"\\\"\\n        for file_path in relevant_files:\\n            absolute_path = os.path.join(self.project_path, file_path)\\n            context += f\\\"\\\\n\\\\n-- File: {file_path} --\\\\n\\\"\\n            context += self._extract_definitions(absolute_path)\\n\\n        return context\"\n  }\n]",
  "model": "gemini-2.0-flash"
}