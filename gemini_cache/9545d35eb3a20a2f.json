{
  "timestamp": 1769074700.615812,
  "response": "[\n  {\n    \"file_path\": \"h2q_project/quaternion_ops.py\",\n    \"content\": \"import numpy as np\\nimport warnings\\n\\ndef quaternion_conjugate(quaternion):\\n    w, x, y, z = quaternion\\n    return (w, -x, -y, -z)\\n\\n\\ndef quaternion_multiply(quaternion1, quaternion2):\\n    w1, x1, y1, z1 = quaternion1\\n    w2, x2, y2, z2 = quaternion2\\n    w = w1 * w2 - x1 * x2 - y1 * y2 - z1 * z2\\n    x = w1 * x2 + x1 * w2 + y1 * z2 - z1 * y2\\n    y = w1 * y2 - x1 * z2 + y1 * w2 + z1 * x2\\n    z = w1 * z2 + x1 * y2 - y1 * x2 + z1 * w2\\n    return (w, x, y, z)\\n\\n\\ndef quaternion_to_rotation_matrix(quaternion):\\n    w, x, y, z = quaternion\\n    n = w * w + x * x + y * y + z * z\\n    if n < np.finfo(float).eps:\\n        return np.identity(3)\\n    s = 2.0 / n\\n    wx = s * w * x\\n    wy = s * w * y\\n    wz = s * w * z\\n    xx = s * x * x\\n    xy = s * x * y\\n    xz = s * x * z\\n    yy = s * y * y\\n    yz = s * y * z\\n    zz = s * z * z\\n    return np.array([\\n        [1.0 - (yy + zz), xy - wz, xz + wy],\\n        [xy + wz, 1.0 - (xx + zz), yz - wx],\\n        [xz - wy, yz + wx, 1.0 - (xx + yy)]\\n    ])\\n\\n\\ndef normalize_quaternion(quaternion):\\n    w, x, y, z = quaternion\\n    norm = np.sqrt(w * w + x * x + y * y + z * z)\\n    if norm == 0:\\n        return (0.0, 0.0, 0.0, 0.0)\\n    return (w / norm, x / norm, y / norm, z / norm)\\n\\n\\ndef check_quaternion_normalized(quaternion, tolerance=1e-5):\\n    w, x, y, z = quaternion\\n    norm = np.sqrt(w * w + x * x + y * y + z * z)\\n    if abs(norm - 1.0) > tolerance:\\n        warnings.warn(\\\"Quaternion is not normalized. Normalizing...\\\")\\n        return False\\n    return True\\n\\ndef rotate_vector_by_quaternion(vector, quaternion):\\n    if not check_quaternion_normalized(quaternion):\\n        quaternion = normalize_quaternion(quaternion)\\n    vector_quaternion = (0.0, vector[0], vector[1], vector[2])\\n    quaternion_conjugate_val = quaternion_conjugate(quaternion)\\n    rotated_quaternion = quaternion_multiply(quaternion_multiply(quaternion, vector_quaternion), quaternion_conjugate_val)\\n    return (rotated_quaternion[1], rotated_quaternion[2], rotated_quaternion[3])\\n\"\n  }\n]",
  "model": "gemini-2.0-flash"
}