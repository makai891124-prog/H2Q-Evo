{
  "timestamp": 1769071232.9381928,
  "response": "[\n  {\n    \"file_path\": \"h2q_project/quaternion_visualizer.py\",\n    \"content\": \"import numpy as np\\nimport matplotlib.pyplot as plt\\nfrom mpl_toolkits.mplot3d import Axes3D\\nfrom scipy.spatial.transform import Rotation as R\\n\\n\\ndef quaternion_to_rotation_matrix(q):\\n    \\\"\\\"\\\"Converts a quaternion to a rotation matrix.\\n\\n    Args:\\n        q (np.ndarray): A quaternion in the form [w, x, y, z].\\n\\n    Returns:\\n        np.ndarray: A 3x3 rotation matrix.\\n    \\\"\\\"\\\"\\n    return R.from_quat([q[1], q[2], q[3], q[0]]).as_matrix()\\n\\n\\ndef visualize_quaternion(q, ax=None):\\n    \\\"\\\"\\\"Visualizes a quaternion by showing its corresponding rotation of a coordinate frame.\\n\\n    Args:\\n        q (np.ndarray): A quaternion in the form [w, x, y, z].\\n        ax (matplotlib.axes._axes.Axes, optional): An existing axes object to plot on. If None, a new figure and axes are created. Defaults to None.\\n\\n    Returns:\\n        matplotlib.axes._axes.Axes: The axes object used for the plot.\\n    \\\"\\\"\\\"\\n    if ax is None:\\n        fig = plt.figure()\\n        ax = fig.add_subplot(111, projection='3d')\\n\\n    # Define the original coordinate frame\\n    x_axis = np.array([1, 0, 0])\\n    y_axis = np.array([0, 1, 0])\\n    z_axis = np.array([0, 0, 1])\\n\\n    # Rotate the coordinate frame using the quaternion\\n    rotation_matrix = quaternion_to_rotation_matrix(q)\\n    rotated_x_axis = rotation_matrix @ x_axis\\n    rotated_y_axis = rotation_matrix @ y_axis\\n    rotated_z_axis = rotation_matrix @ z_axis\\n\\n    # Plot the original and rotated coordinate frames\\n    origin = np.array([0, 0, 0])\\n    ax.quiver(*origin, *x_axis, color='r', label='X', arrow_length_ratio=0.2)\\n    ax.quiver(*origin, *y_axis, color='g', label='Y', arrow_length_ratio=0.2)\\n    ax.quiver(*origin, *z_axis, color='b', label='Z', arrow_length_ratio=0.2)\\n\\n    ax.quiver(*origin, *rotated_x_axis, color='r', linestyle='--', arrow_length_ratio=0.2)\\n    ax.quiver(*origin, *rotated_y_axis, color='g', linestyle='--', arrow_length_ratio=0.2)\\n    ax.quiver(*origin, *rotated_z_axis, color='b', linestyle='--', arrow_length_ratio=0.2)\\n\\n    # Set axis limits and labels\\n    ax.set_xlim([-1, 1])\\n    ax.set_ylim([-1, 1])\\n    ax.set_zlim([-1, 1])\\n    ax.set_xlabel('X')\\n    ax.set_ylabel('Y')\\n    ax.set_zlabel('Z')\\n    ax.set_title('Quaternion Visualization')\\n    ax.legend()\\n\\n    return ax\\n\\n\\nif __name__ == '__main__':\\n    # Example usage:\\n    # Create a sample quaternion (rotation of 90 degrees around the Z axis)\\n    q = np.array([np.cos(np.pi/4), 0, 0, np.sin(np.pi/4)]) # w, x, y, z\\n    \\n    # Normalize the quaternion (important for correct rotations)\\n    q = q / np.linalg.norm(q)\\n\\n    # Visualize the quaternion\\n    ax = visualize_quaternion(q)\\n    plt.show()\\n\"\n  }\n]",
  "model": "gemini-2.0-flash"
}