{
  "timestamp": 1769074782.2728078,
  "response": "[\n  {\n    \"file_path\": \"h2q_project/memory_monitor.py\",\n    \"content\": \"import docker\\nimport time\\nimport logging\\n\\nlogging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')\\n\\nclass MemoryMonitor:\\n    def __init__(self, container_name, threshold_percent=90, interval=60):\\n        self.client = docker.from_env()\\n        self.container_name = container_name\\n        self.threshold_percent = threshold_percent\\n        self.interval = interval\\n        self.container = None\\n\\n    def get_container(self):\\n        try:\\n            self.container = self.client.containers.get(self.container_name)\\n        except docker.errors.NotFound:\\n            logging.error(f\\\"Container '{self.container_name}' not found.\\\")\\n            return False\\n        except docker.errors.APIError as e:\\n            logging.error(f\\\"Error connecting to Docker API: {e}\\\")\\n            return False\\n        return True\\n\\n    def get_memory_usage(self):\\n        if not self.container:\\n            if not self.get_container():\\n                return None\\n\\n        try:\\n            stats = self.container.stats(stream=False)\\n            memory_usage = stats['memory_stats']['usage']\\n            memory_limit = stats['memory_stats']['limit']\\n            return memory_usage, memory_limit\\n        except docker.errors.APIError as e:\\n            logging.error(f\\\"Error getting container stats: {e}\\\")\\n            return None, None\\n\\n    def check_threshold(self, usage, limit):\\n        if limit == 0:  # Handle unlimited memory\\n            logging.warning(\\\"Memory limit is set to unlimited. Threshold check disabled.\\\")\\n            return False\\n\\n        usage_percent = (usage / limit) * 100\\n        if usage_percent > self.threshold_percent:\\n            logging.warning(f\\\"Memory usage for '{self.container_name}' is above threshold: {usage_percent:.2f}% > {self.threshold_percent}%\\\")\\n            return True\\n        return False\\n\\n    def run(self):\\n        if not self.get_container():\\n            return\\n\\n        while True:\\n            usage, limit = self.get_memory_usage()\\n\\n            if usage is not None and limit is not None:\\n                self.check_threshold(usage, limit)\\n\\n            time.sleep(self.interval)\\n\\nif __name__ == '__main__':\\n    # Example usage:\\n    monitor = MemoryMonitor(container_name='my_container', threshold_percent=80, interval=30)\\n    monitor.run()\"\n  }\n]",
  "model": "gemini-2.0-flash"
}