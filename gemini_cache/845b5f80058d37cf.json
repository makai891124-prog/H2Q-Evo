{
  "timestamp": 1769075915.26387,
  "response": "[\n  {\n    \"file_path\": \"h2q_project/memory_monitor.py\",\n    \"content\": \"import docker\\nimport time\\nimport json\\nimport logging\\n\\n# Configure logging\\nlogging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')\\n\\nclass MemoryMonitor:\\n    def __init__(self, container_name, threshold_percent=90, interval=60):\\n        self.container_name = container_name\\n        self.threshold_percent = threshold_percent\\n        self.interval = interval\\n        self.client = docker.from_env()\\n        self.container = self.client.containers.get(self.container_name)\\n\\n    def get_memory_usage(self):\\n        try:\\n            stats = self.container.stats(stream=False)\\n            memory_usage = stats['memory_stats']['usage']\\n            memory_limit = stats['memory_stats']['limit']\\n            percentage_used = (memory_usage / memory_limit) * 100 if memory_limit > 0 else 0\\n            return percentage_used\\n        except Exception as e:\\n            logging.error(f\\\"Error getting memory usage: {e}\\\")\\n            return None\\n\\n    def check_threshold(self):\\n        usage = self.get_memory_usage()\\n        if usage is None:\\n            return\\n\\n        if usage > self.threshold_percent:\\n            logging.warning(f\\\"Memory usage for {self.container_name} is above threshold: {usage:.2f}% > {self.threshold_percent}%\\\")\\n        else:\\n            logging.info(f\\\"Memory usage for {self.container_name}: {usage:.2f}% (Threshold: {self.threshold_percent}%) \\\")\\n\\n    def run(self):\\n        while True:\\n            self.check_threshold()\\n            time.sleep(self.interval)\\n\\nif __name__ == '__main__':\\n    # Example usage\\n    container_name = 'my_container'  # Replace with your container name\\n    threshold_percent = 80  # Example threshold\\n    interval = 30  # Check every 30 seconds\\n\\n    monitor = MemoryMonitor(container_name, threshold_percent, interval)\\n    monitor.run()\"\n  }\n]",
  "model": "gemini-2.0-flash"
}